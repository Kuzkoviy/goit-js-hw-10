{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nconst refs = {\n        calendar: document.querySelector('#datetime-picker'),\n        start: document.querySelector('button[data-start]'),\n        days: document.querySelector('span[data-days]'),\n        hours: document.querySelector('span[data-hours]'),\n        minutes: document.querySelector('span[data-minutes]'),\n        seconds: document.querySelector('span[data-seconds]'),\n};\n\nconst options = {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n          console.log(selectedDates[0]);\n          if(selectedDates[0].getTime() < Date.now()) {\n                iziToast.warning({\n                        message: 'Please choose date in the future',\n                        position: \"topRight\",\n                        closeOnClick: 'true',\n                        closeOnEscape: 'true',\n                        backgroundColor: 'red',\n                        titleSize: '20',\n                        messageSize: '14'});\n                refs.start.setAttribute('disabled', 1);\n                return;\n          } \n                refs.start.removeAttribute('disabled');\n        },\n      };\n\nlet timer = null;\n\nflatpickr(refs.calendar, options);\nrefs.start.setAttribute('disabled', 1);\n\nfunction addLeadingZero(value){\n         return String(value).padStart(2, '0');\n};\n\nfunction convertMs(ms) {\n        // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n      \n        // Remaining days\n        const days = addLeadingZero(Math.floor(ms / day));\n        // Remaining hours\n        const hours = addLeadingZero(Math.floor((ms % day) / hour));\n        // Remaining minutes\n        const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n        // Remaining seconds\n        const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n      \n        return { days, hours, minutes, seconds };\n      }\n\n\nfunction onButtonClick() {\n        timer = setInterval(() => {\n                const difference = new Date(refs.calendar.value) - Date.now();\n                if(difference < 0) {\n                        clearInterval(timer);\n                        refs.start.setAttribute('disabled', 1);\n                } \n\n                const data = convertMs(difference);\n                updateTimer(data);\n        }, 1000);\n};\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n        refs.days.textContent = days;\n        refs.hours.textContent = hours;\n        refs.minutes.textContent = minutes;\n        refs.seconds.textContent = seconds;\n};\n\n\nrefs.start.addEventListener('click', onButtonClick);"],"names":["refs","options","selectedDates","iziToast","timer","flatpickr","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","onButtonClick","difference","data","updateTimer"],"mappings":"+IAWA,MAAMA,EAAO,CACL,SAAU,SAAS,cAAc,kBAAkB,EACnD,MAAO,SAAS,cAAc,oBAAoB,EAClD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CAC5D,EAEMC,EAAU,CACR,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErB,GADA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACzBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,MAAO,CACtCC,EAAS,QAAQ,CACT,QAAS,mCACT,SAAU,WACV,aAAc,OACd,cAAe,OACf,gBAAiB,MACjB,UAAW,KACX,YAAa,IAAI,CAAC,EAC1BH,EAAK,MAAM,aAAa,WAAY,CAAC,EACrC,MACL,CACKA,EAAK,MAAM,gBAAgB,UAAU,CAC5C,CACT,EAEA,IAAII,EAAQ,KAEZC,EAAUL,EAAK,SAAUC,CAAO,EAChCD,EAAK,MAAM,aAAa,WAAY,CAAC,EAErC,SAASM,EAAeC,EAAM,CACrB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CAC7C,CAEA,SAASC,EAAUC,EAAI,CAQf,MAAMC,EAAOJ,EAAe,KAAK,MAAMG,EAAK,KAAG,CAAC,EAE1CE,EAAQL,EAAe,KAAK,MAAOG,EAAK,MAAO,IAAI,CAAC,EAEpDG,EAAUN,EAAe,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEI,EAAUP,EAAe,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAGP,SAASC,GAAgB,CACjBV,EAAQ,YAAY,IAAM,CAClB,MAAMW,EAAa,IAAI,KAAKf,EAAK,SAAS,KAAK,EAAI,KAAK,MACrDe,EAAa,IACR,cAAcX,CAAK,EACnBJ,EAAK,MAAM,aAAa,WAAY,CAAC,GAG7C,MAAMgB,EAAOR,EAAUO,CAAU,EACjCE,EAAYD,CAAI,CACvB,EAAE,GAAI,CACf,CAEA,SAASC,EAAY,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAChDb,EAAK,KAAK,YAAcU,EACxBV,EAAK,MAAM,YAAcW,EACzBX,EAAK,QAAQ,YAAcY,EAC3BZ,EAAK,QAAQ,YAAca,CACnC,CAGAb,EAAK,MAAM,iBAAiB,QAASc,CAAa"}